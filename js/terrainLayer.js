var _0x30db=['OrbitControls','translateY','container_name','POST','catch','Vector3','end_segment_line','base64','container','screenSpacePanning','translateZ','enableDamping','generateTerrainForBase64image','Face3','prototype','trajectory_line_width','add','length','ERROR','width','replace','parseResponse','camera','aspect','push','appendChild','height','verticesNeedUpdate','bitmap','updateProjectionMatrix','rotation','xmin','read','lat','controls','animate','zmax','AmbientLight','stringify','fp_start_segment','zmin','then','Color','scene','http://127.0.0.1:10003/generate_map','remove','lng','position','Mesh','BufferGeometry','from','ERROR.\x20No\x20points\x20were\x20specified','colorsNeedUpdate','application/json','start_segment_line','colors','dynamic','geometry','plane','render','minDistance','trajectory_points','renderer','fp_end_segment','rotateX','vertexColors','container_h','ymax','domElement','PerspectiveCamera','container_w','vertices','VertexColors','operation_zone','json','log','ymin','data','setSize','faces','xmax','setClearColor','WebGLRenderer','operation_zone_cyl','dampingFactor','ajax','trajectory_line','maxPolarAngle'];(function(_0x858efb,_0x30db74){var _0x1435a7=function(_0x402903){while(--_0x402903){_0x858efb['push'](_0x858efb['shift']());}};_0x1435a7(++_0x30db74);}(_0x30db,0x87));var _0x1435=function(_0x858efb,_0x30db74){_0x858efb=_0x858efb-0x0;var _0x1435a7=_0x30db[_0x858efb];return _0x1435a7;};let groundURL=_0x1435('0x55');let saved=![];function TerrainLayer(_0x11e563,_0x52a505,_0x91a102){this[_0x1435('0x2b')]=_0x11e563;this[_0x1435('0x31')]=undefined;this[_0x1435('0x17')]=_0x52a505;this[_0x1435('0x13')]=_0x91a102;this[_0x1435('0x54')]=undefined;this['camera']=undefined;this[_0x1435('0xf')]=undefined;this[_0x1435('0x48')]=-0x1;this['xmax']=-0x1;this[_0x1435('0x1d')]=-0x1;this[_0x1435('0x14')]=-0x1;this['zmin']=-0x1;this[_0x1435('0x21')]=-0x1;this[_0x1435('0x50')]=undefined;this[_0x1435('0x10')]=undefined;this[_0x1435('0x38')]=0.2;this[_0x1435('0xe')]=[];this[_0x1435('0x1a')]=undefined;}TerrainLayer[_0x1435('0x37')]['setup']=function(){this[_0x1435('0x31')]=document['getElementById'](this[_0x1435('0x2b')]);this['scene']=new THREE['Scene']();this[_0x1435('0x3f')]=new THREE[(_0x1435('0x16'))](0x4b,this[_0x1435('0x17')]/this[_0x1435('0x13')],0.1,0x3e8);this[_0x1435('0xf')]=new THREE[(_0x1435('0x23'))]();this[_0x1435('0xf')][_0x1435('0x22')](new THREE[(_0x1435('0x53'))]('#E6F5FC'));this[_0x1435('0x31')][_0x1435('0x42')](this[_0x1435('0xf')][_0x1435('0x15')]);this[_0x1435('0xf')][_0x1435('0x1f')](this[_0x1435('0x17')],this[_0x1435('0x13')]);this[_0x1435('0x3f')][_0x1435('0x40')]=this[_0x1435('0x17')]/this[_0x1435('0x13')];this[_0x1435('0x3f')][_0x1435('0x46')]();var _0x125e49=new THREE[(_0x1435('0x4e'))](0xffffff);this[_0x1435('0x54')][_0x1435('0x39')](_0x125e49);var _0x4ab5ed=this;};TerrainLayer[_0x1435('0x37')]['mountScene']=function(_0x5c7561){var _0x59d966=this;if(this[_0x1435('0x4b')]==undefined){this[_0x1435('0x4b')]=new THREE[(_0x1435('0x29'))](this['camera'],this['renderer'][_0x1435('0x15')]);this[_0x1435('0x4b')][_0x1435('0x34')]=![];this[_0x1435('0x4b')][_0x1435('0x25')]=0.25;this['controls'][_0x1435('0x32')]=![];this[_0x1435('0x4b')][_0x1435('0xd')]=0x1;this['controls']['maxDistance']=0x1f4;this[_0x1435('0x4b')][_0x1435('0x28')]=Math['PI']/0x2;}if(_0x5c7561==undefined){_0x59d966[_0x1435('0x3e')](ground_data,_0x59d966['trajectory_points']);}else{if(_0x5c7561!=undefined&&_0x5c7561['length']>0x0){var _0x9b4bdd=0x98967f;var _0x2f7630=-0x98967f;var _0x10bcd1=0x98967f;var _0x9047da=-0x98967f;for(var _0x40a513=0x0;_0x40a513<_0x5c7561[_0x1435('0x3a')];_0x40a513++){var _0x30af9e=_0x5c7561[_0x40a513];if(_0x30af9e[_0x1435('0x4a')]>_0x2f7630){_0x2f7630=_0x30af9e['lat'];}if(_0x30af9e['lat']<_0x9b4bdd){_0x9b4bdd=_0x30af9e[_0x1435('0x4a')];}if(_0x30af9e[_0x1435('0x57')]<_0x10bcd1){_0x10bcd1=_0x30af9e[_0x1435('0x57')];}if(_0x30af9e[_0x1435('0x57')]>_0x9047da){_0x9047da=_0x30af9e[_0x1435('0x57')];}}var _0x20fa8d={};_0x20fa8d['nw']={'lat':_0x2f7630,'lon':_0x10bcd1};_0x20fa8d['ne']={'lat':_0x2f7630,'lon':_0x9047da};_0x20fa8d['se']={'lat':_0x9b4bdd,'lon':_0x9047da};_0x20fa8d['sw']={'lat':_0x9b4bdd,'lon':_0x10bcd1};if(_0x59d966['plane']!=undefined){_0x59d966[_0x1435('0x54')][_0x1435('0x56')](_0x59d966[_0x1435('0xb')]);_0x59d966['scene']['remove'](_0x59d966[_0x1435('0x27')]);_0x59d966[_0x1435('0x54')][_0x1435('0x56')](_0x59d966[_0x1435('0x24')]);if(_0x59d966[_0x1435('0x7')]!=undefined)_0x59d966[_0x1435('0x54')][_0x1435('0x56')](_0x59d966[_0x1435('0x7')]);if(_0x59d966[_0x1435('0x2f')]!=undefined)_0x59d966[_0x1435('0x54')]['remove'](_0x59d966[_0x1435('0x2f')]);_0x59d966[_0x1435('0xb')]=undefined;}$[_0x1435('0x26')]({'type':_0x1435('0x2c'),'url':groundURL,'dataType':_0x1435('0x1b'),'async':!![],'data':JSON[_0x1435('0x4f')](_0x20fa8d),'contentType':_0x1435('0x6'),'success':function(_0x493c93){_0x59d966['parseResponse'](_0x493c93,_0x59d966[_0x1435('0xe')]);},'error':function(_0x22f7d6,_0x4adfb7,_0x48cdd1){alert(_0x4adfb7);console[_0x1435('0x1c')](_0x22f7d6);console['log'](_0x48cdd1,_0x4adfb7,_0x22f7d6);}});}else{alert(_0x1435('0x4'));}}this['animate']=function(){requestAnimationFrame(_0x59d966[_0x1435('0x4c')]);_0x59d966[_0x1435('0xf')][_0x1435('0xc')](_0x59d966[_0x1435('0x54')],_0x59d966[_0x1435('0x3f')]);};};TerrainLayer[_0x1435('0x37')][_0x1435('0x3e')]=function(_0x12f847,_0x333c74){this[_0x1435('0x35')](_0x12f847['bw'],_0x12f847['rgb'],_0x12f847['info']);};TerrainLayer[_0x1435('0x37')]['generateTerrainForBase64image']=function(_0xbd05f8,_0x14ecc5,_0x1b3323){var _0x312b17=this;Jimp['read'](Buffer[_0x1435('0x3')](_0x14ecc5[_0x1435('0x3d')](/^data:image\/png;base64,/,''),'base64'))[_0x1435('0x52')](function(_0x33be54){Jimp[_0x1435('0x49')](Buffer[_0x1435('0x3')](_0xbd05f8[_0x1435('0x3d')](/^data:image\/png;base64,/,''),_0x1435('0x30')))[_0x1435('0x52')](function(_0x5d7f1f){var _0x3bd7a7=new THREE['PlaneGeometry'](_0x5d7f1f[_0x1435('0x45')][_0x1435('0x3c')],_0x5d7f1f[_0x1435('0x45')][_0x1435('0x43')],_0x5d7f1f[_0x1435('0x45')]['width']-0x1,_0x5d7f1f[_0x1435('0x45')][_0x1435('0x43')]-0x1);_0x3bd7a7[_0x1435('0x18')]=[];_0x3bd7a7[_0x1435('0x11')](-Math['PI']/0x2);var _0x33e1f8=new THREE['MeshLambertMaterial']({'flatShading':!![],'vertexColors':THREE[_0x1435('0x19')],'shininess':0x0});var _0xca10ee,_0xde1d76,_0x2f1ce5,_0x4c64b2,_0x5957ff,_0x3fd0db,_0x1f2df5,_0xa6fad1;_0x3bd7a7[_0x1435('0x9')]=!![];_0x312b17['xmin']=_0x1b3323[_0x1435('0x48')];_0x312b17[_0x1435('0x1d')]=_0x1b3323[_0x1435('0x1d')];_0x312b17['zmin']=_0x1b3323[_0x1435('0x51')];_0x312b17['xmax']=_0x1b3323[_0x1435('0x21')];_0x312b17[_0x1435('0x14')]=_0x1b3323[_0x1435('0x14')];_0x312b17[_0x1435('0x4d')]=_0x1b3323[_0x1435('0x4d')];var _0x2b341e=_0x1b3323[_0x1435('0x4d')]-_0x1b3323['zmin'];var _0x570e1f=_0x1b3323[_0x1435('0x21')]-_0x1b3323[_0x1435('0x48')];var _0x2a8bb9=0x0;var _0x2dc8c9=0x98967f;var _0x558cd0=_0x5d7f1f['bitmap'][_0x1435('0x3c')];var _0x4d1932=0x0;for(var _0x41242e=0x0;_0x41242e<_0x5d7f1f[_0x1435('0x45')][_0x1435('0x43')];_0x41242e++){for(var _0x17bbbf=0x0;_0x17bbbf<_0x5d7f1f[_0x1435('0x45')][_0x1435('0x3c')];_0x17bbbf++){_0x3fd0db=_0x5d7f1f['getPixelIndex'](_0x17bbbf,_0x41242e);_0x5957ff=_0x5d7f1f['bitmap'][_0x1435('0x1e')][_0x3fd0db];_0x1f2df5=_0x5d7f1f[_0x1435('0x45')][_0x1435('0x1e')][_0x3fd0db+0x1];_0xa6fad1=_0x5d7f1f['bitmap'][_0x1435('0x1e')][_0x3fd0db+0x2];_0xde1d76=_0x33be54[_0x1435('0x45')][_0x1435('0x1e')][_0x3fd0db];_0x2f1ce5=_0x33be54['bitmap'][_0x1435('0x1e')][_0x3fd0db+0x1];_0x4c64b2=_0x33be54[_0x1435('0x45')][_0x1435('0x1e')][_0x3fd0db+0x2];if(_0x5957ff!=_0x1f2df5||_0x1f2df5!=_0xa6fad1){_0x1f2df5=_0x5957ff;_0xa6fad1=grayy;}var _0x195993=_0x5957ff/0xff;var _0x4ec9b1=_0x195993*_0x2b341e*_0x5d7f1f[_0x1435('0x45')][_0x1435('0x3c')]/_0x570e1f;if(_0x4ec9b1>_0x2a8bb9){_0x2a8bb9=_0x4ec9b1;}if(_0x4ec9b1<_0x2dc8c9){_0x2dc8c9=_0x4ec9b1;}_0x3bd7a7[_0x1435('0x18')][_0x1435('0x41')](new THREE[(_0x1435('0x2e'))](_0x17bbbf,_0x4ec9b1,_0x41242e));_0xca10ee=new THREE[(_0x1435('0x53'))](_0xde1d76/0xff,_0x2f1ce5/0xff,_0x4c64b2/0xff);_0x3bd7a7[_0x1435('0x8')][_0x1435('0x41')](_0xca10ee);}}_0x3bd7a7[_0x1435('0x44')]=!![];var _0x5c70a7,_0xadf0d0;var _0x392352=['a','b','c','d'];for(var _0x384175=0x0;_0x384175<_0x3bd7a7[_0x1435('0x20')]['length'];_0x384175++){face=_0x3bd7a7[_0x1435('0x20')][_0x384175];_0x5c70a7=face instanceof THREE[_0x1435('0x36')]?0x3:0x4;for(var _0xd9cedf=0x0;_0xd9cedf<_0x5c70a7;_0xd9cedf++){_0xadf0d0=face[_0x392352[_0xd9cedf]];face[_0x1435('0x12')][_0xd9cedf]=_0x3bd7a7[_0x1435('0x8')][_0xadf0d0];}}let _0x13a428=new THREE[(_0x1435('0x2'))]()['fromGeometry'](_0x3bd7a7);_0x3bd7a7=undefined;var _0x1c7dab=new THREE[(_0x1435('0x1'))](_0x13a428,_0x33e1f8);_0x1c7dab[_0x1435('0xa')][_0x1435('0x5')]=!![];_0x1c7dab['translateX'](-_0x5d7f1f[_0x1435('0x45')][_0x1435('0x3c')]/0x2);_0x1c7dab[_0x1435('0x33')](-_0x5d7f1f['bitmap'][_0x1435('0x3c')]/0x2);_0x1c7dab[_0x1435('0x2a')](-_0x2a8bb9/0x2);_0x312b17[_0x1435('0x54')][_0x1435('0x39')](_0x1c7dab);_0x312b17[_0x1435('0x3f')][_0x1435('0x0')]['y']=_0x2a8bb9;_0x312b17[_0x1435('0x3f')]['rotation']['x']=-0.791;_0x312b17[_0x1435('0x3f')][_0x1435('0x47')]['y']=-0.003;_0x312b17[_0x1435('0x3f')][_0x1435('0x47')]['z']=-0.003;_0x312b17[_0x1435('0xb')]=_0x1c7dab;_0x312b17[_0x1435('0x4c')]();})[_0x1435('0x2d')](function(_0xd73912){console['log'](_0x1435('0x3b'),_0xd73912);});})['catch'](function(_0x17db40){console[_0x1435('0x1c')](_0x1435('0x3b'),_0x17db40);});};function rads(_0x3fe66f){return _0x3fe66f*Math['PI']/0xb4;}function deg(_0x482eaa){return _0x482eaa*0xb4/Math['PI'];}